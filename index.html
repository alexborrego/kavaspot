<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bula Board - Events, Deals & Vibes in St. Pete</title>
<meta name="description" content="Events, deals, and vibes ‚Äî all in one place.">
<link rel="stylesheet" href="styles.css">
</head>
<body>
<div class="app">
<header class="header">
<div class="header-content">
<div class="logo">
<div class="logo-icon"><img src="kava-shell.svg" alt=""></div>
<h1>Bula Board</h1>
</div>
<button class="nav-btn small" onclick="showAbout()">?</button>
</div>
</header>

<div class="search-container">
<div class="search-box">
<img src="glyphs/search.svg" class="search-icon" alt="">
<input type="text" placeholder="Search events, bars..." id="search" oninput="handleSearch(this.value)">
</div>
</div>

<main class="main">
<div id="skeletonLoader" class="skeleton-container">
<div class="skeleton-card"></div>
<div class="skeleton-list"><div class="skeleton-item"></div><div class="skeleton-item"></div><div class="skeleton-item"></div></div>
</div>

<div id="eventsTab">
<div class="filter-bar">
<select id="dayFilter" onchange="filterEventsByDay()">
<option value="All">All Days</option>
<option value="Monday">Monday</option>
<option value="Tuesday">Tuesday</option>
<option value="Wednesday">Wednesday</option>
<option value="Thursday">Thursday</option>
<option value="Friday">Friday</option>
<option value="Saturday">Saturday</option>
<option value="Sunday">Sunday</option>
</select>
</div>
<div class="featured-card" onclick="showEvent(0)">
<div class="featured-badge"><img src="glyphs/star.svg" alt=""> Featured</div>
<img src="glyphs/mic.svg" class="featured-icon" alt="">
<h3>Karaoke</h3>
<p>Mad Hatters Kava Bar</p>
<div class="featured-meta"><span><img src="glyphs/calendar.svg" alt=""> Friday @ 9pm</span><span><img src="glyphs/pin.svg" alt=""> St. Pete</span></div>
</div>
<div class="event-list" id="eventList"></div>
</div>

<div id="barsTab" style="display:none;">
<div class="filter-bar">
<select id="locationFilter" onchange="filterBarsByLocation()">
<option value="All">All Locations</option>
<option value="St. Pete">St. Pete</option>
<option value="Clearwater">Clearwater</option>
<option value="Largo">Largo</option>
</select>
</div>
<div class="bar-card" onclick="showBar(0)">
<div class="featured-badge"><img src="glyphs/star.svg" alt=""> Best of the Bay</div>
<h3>Bula Kafe</h3>
<p>2500 5th Ave N, St. Pete</p>
<div class="bar-meta"><span><img src="glyphs/clock.svg" alt=""> 7am-2am daily</span><span>‚òï Coffee + Kava</span></div>
</div>
<div class="bar-list" id="barList"></div>
</div>

<div id="dealsTab" style="display:none;">
<div class="filter-bar">
<select id="dealDayFilter" onchange="filterDealsByDay()">
<option value="All">All Days</option>
<option value="Monday">Monday</option>
<option value="Tuesday">Tuesday</option>
<option value="Wednesday">Wednesday</option>
<option value="Thursday">Thursday</option>
<option value="Friday">Friday</option>
<option value="Saturday">Saturday</option>
<option value="Sunday">Sunday</option>
</select>
</div>
<div class="deal-card">
<img src="glyphs/star.svg" class="deal-fire" alt="">
<h3>Best Deal This Week</h3>
<p>15% off KHB Botanicals</p>
<span class="deal-location">Kava House Brand</span>
<span class="deal-time">Mon-Fri ‚Ä¢ 3-6pm</span>
</div>
<div class="deal-list" id="dealList"></div>
</div>
</main>

<section class="newsletter">
<div class="newsletter-content">
<img src="glyphs/mail.svg" alt="">
<div>
<h3>Weekly Digest</h3>
<p>Curated events, every Saturday</p>
</div>
</div>
<form class="newsletter-form" onsubmit="handleNewsletter(event)">
<input type="email" placeholder="your@email.com" required>
<button type="submit">Join</button>
</form>
</section>

<footer class="footer">
<p>Bula Board ‚Ä¢ St. Pete + Clearwater</p>
<div class="footer-links">
<a href="#" onclick="showAbout(); return false;">About</a>
<a href="#" onclick="showForBars(); return false;">For Bars</a>
</div>
</footer>

<nav class="bottom-nav">
<button class="nav-btn active" data-tab="events" onclick="switchTab('events')"><img src="glyphs/calendar.svg" alt=""><span>Events</span></button>
<button class="nav-btn" data-tab="bars" onclick="switchTab('bars')"><img src="glyphs/coconut.svg" alt=""><span>Bars</span></button>
<button class="nav-btn" data-tab="deals" onclick="switchTab('deals')"><img src="glyphs/star.svg" alt=""><span>Deals</span></button>
</nav>
</div>

<div class="modal" id="eventModal" onclick="closeEventModal()">
<div class="modal-content" onclick="event.stopPropagation()">
<button class="modal-close" onclick="closeEventModal()">‚úï</button>
<div class="modal-header" id="eventModalHeader"></div>
<div class="modal-body" id="eventModalBody"></div>
</div>
</div>

<div class="modal" id="barModal" onclick="closeBarModal()">
<div class="modal-content" onclick="event.stopPropagation()">
<button class="modal-close" onclick="closeBarModal()">‚úï</button>
<div class="modal-header bar-modal-header" id="barModalHeader"></div>
<div class="modal-body" id="barModalBody"></div>
</div>
</div>

<div class="modal" id="aboutModal" onclick="closeAboutModal()">
<div class="modal-content" onclick="event.stopPropagation()">
<button class="modal-close" onclick="closeAboutModal()">‚úï</button>
<div class="modal-body about-content">
<h2>What is Kava?</h2>
<p>Kava is a traditional South Pacific beverage made from the roots of the Piper methysticum plant. For centuries, Pacific Island cultures have used kava in ceremonial and social settings.</p>
<p>When consumed, kava has a relaxing effect on the body, eases tension, and alleviates stress while enhancing mental clarity, creativity, and sociability.</p>
<h3>Popular Drinks</h3>
<ul>
<li><strong>Kava Shell</strong> - Traditional preparation, served in coconut shells</li>
<li><strong>Kava Flight</strong> - Sample multiple varieties</li>
<li><strong>Botanical Elixirs</strong> - Kava mixed with herbs and flavors</li>
<li><strong>Kava Tea</strong> - Relaxing herbal tea blend</li>
</ul>
<h3>About Bula Board</h3>
<p>We curate the best kava bars, events, and deals in St. Petersburg and Clearwater.</p>
<p class="about-note">Please drink responsibly. Kava may cause drowsiness.</p>
</div>
</div>
</div>

<div class="modal" id="forBarsModal" onclick="closeForBarsModal()">
<div class="modal-content" onclick="event.stopPropagation()">
<button class="modal-close" onclick="closeForBarsModal()">‚úï</button>
<div class="modal-body about-content">
<h2>List Your Bar on Bula Board</h2>
<p>Reach thousands of kava enthusiasts in the St. Petersburg and Clearwater area.</p>
<h3>What's Included</h3>
<ul>
<li>Free listing with hours, address, and description</li>
<li>Promote your events and specials</li>
<li>Reach a targeted local audience</li>
</ul>
<h3>Get Started</h3>
<p>Email us at <strong>hello@bula.board</strong></p>
</div>
</div>
</div>

<script>
const bars = [
{name:"Bula Kafe",address:"2500 5th Ave N, St. Pete, FL 33713",hours:"7am-2am daily",vibe:"Original Kava Bar",image:"coconut",featured:true,desc:"St. Pete's original kava bar (since 2021). Voted Best Kava Bar 4 years running.",phone:"",map:"https://maps.google.com/?q=2500+5th+Ave+N+St+Pete+FL",menu:"https://bula-kafe.com/"},
{name:"Grassroots Kava House",address:"957 Central Ave, St. Pete, FL 33705",hours:"7am-12am Mon-Fri | 8am-12am Sat-Sun",vibe:"Community Hub",image:"tree",featured:false,desc:"OG location in the Edge District. 3,000 sq ft with rooftop patio. Dogs welcome.",phone:"",map:"https://maps.google.com/?q=957+Central+Ave+St+Pete+FL",menu:""},
{name:"Mad Hatters Kava Bar",address:"4685 28th St N, St. Pete, FL 33714",hours:"7am-2am Mon-Thu | 7am-3am Fri-Sat | 7am-2am Sun",vibe:"Late Night Party",image:"hat",featured:false,desc:"Kava, Kratom, Hookah, Boba & More. Massive space with games.",phone:"",map:"https://maps.google.com/?q=4685+28th+St+N+St+Pete+FL",menu:"https://www.madhattersteabar.com/kavamenu"},
{name:"Speakeasy Kava Central",address:"2101 Central Ave, St. Pete, FL 33713",hours:"7am-1am daily",vibe:"Cozy Lounge",image:"crystal",featured:false,desc:"Fire pit patio, coffee, kombucha, adaptogens. Welcoming atmosphere.",phone:"727-329-9915",map:"https://maps.google.com/?q=2101+Central+Ave+St+Pete+FL",menu:"https://speakeasykavabar.com/speakeasy-menu/"},
{name:"Kava House Brand HWY 19",address:"11141 US Hwy 19 N, Clearwater, FL 33764",hours:"10am-2am daily",vibe:"Flagship",image:"leaf",featured:false,desc:"4,000 sq ft flagship with 60-ft bar, arcade games, pool table.",phone:"",map:"https://maps.google.com/?q=11141+US+Hwy+19+N+Clearwater+FL",menu:"https://www.kavahousebrand.com/menus"}
];

const events = [
{id:1,bar:"Mad Hatters Kava Bar",name:"Karaoke",day:"Friday",date:"Feb 7",time:"9pm",type:"Music",image:"mic",location:"4685 28th St N, St. Pete",desc:"Weekly karaoke with words on the big projector screen. Hosted by Michelle."},
{id:2,bar:"Grassroots Kava House",name:"Trivia Night",day:"Thursday",date:"Feb 6",time:"7pm",type:"Social",image:"brain",location:"957 Central Ave, St. Pete",desc:"Weekly trivia with prizes. Hosted by Answers R In."},
{id:3,bar:"Speakeasy Kava Central",name:"Trivia Night",day:"Wednesday",date:"Feb 5",time:"7pm",type:"Social",image:"question",location:"2101 Central Ave, St. Pete",desc:"Weekly trivia night. Test your knowledge and win prizes."},
{id:4,bar:"Mad Hatters Kava Bar",name:"Open Mic Night",day:"Sunday",date:"Feb 9",time:"7pm",type:"Music",image:"guitar",location:"4685 28th St N, St. Pete",desc:"Free pool all day + Open Mic on the patio."},
{id:5,bar:"Grassroots Kava House",name:"Open Mic",day:"Sunday",date:"Feb 9",time:"6pm",type:"Music",image:"piano",location:"957 Central Ave, St. Pete",desc:"Open mic night at the community hub."},
{id:6,bar:"Kava House Brand HWY 19",name:"Karaoke Night",day:"Saturday",date:"Feb 8",time:"9pm",type:"Music",image:"mic",location:"11141 US Hwy 19 N, Clearwater",desc:"Weekly karaoke at HWY 19."},
{id:7,bar:"Speakeasy Kava Central",name:"Karaoke",day:"Saturday",date:"Feb 8",time:"10pm",type:"Music",image:"mic",location:"2101 Central Ave, St. Pete",desc:"Late night karaoke."}
];

const deals = [
{bar:"Kava House Brand",offer:"15% off KHB Botanicals",code:"HAPPY15",expires:"Mon-Fri ‚Ä¢ 3-6pm",location:"All Locations",desc:"Weekday Happy Hour",days:["Monday","Tuesday","Wednesday","Thursday","Friday"]},
{bar:"Kava House Brand",offer:"BOGO Double Kava",code:"BOGO",expires:"Wednesday ‚Ä¢ 6pm-Close",location:"54th Ave & 4th St",desc:"Buy one get one free",days:["Wednesday"]},
{bar:"Kava House Brand",offer:"20% off Botanical Teas",code:"TEA20",expires:"Tuesday ‚Ä¢ All Day",location:"All Locations",desc:"Dine-in only",days:["Tuesday"]},
{bar:"Kava House Brand",offer:"15% off Late Night",code:"LATE15",expires:"Mon & Fri ‚Ä¢ 9-11pm",location:"54th Ave (Mon) | HWY19 (Fri)",desc:"Late Night Happy Hour",days:["Monday","Friday"]},
{bar:"Speakeasy Kava Central",offer:"Double Shells for Single Price",code:"HH",expires:"Mon-Fri ‚Ä¢ 11am-2pm & 6-9pm",location:"All Locations",desc:"Happy Hour Special",days:["Monday","Tuesday","Wednesday","Thursday","Friday"]},
{bar:"Bula Kafe",offer:"Free Kava Flight",code:"NEW10",expires:"New Customers",location:"2500 5th Ave N",desc:"Ask your server",days:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"]}
];

function initApp() {
setTimeout(() => {
document.getElementById('skeletonLoader').style.display = 'none';
document.getElementById('eventsTab').style.display = 'block';
renderEvents();
renderBars();
renderDeals();
}, 300);
}

function renderBars(filter = 'All', search = '') {
const list = document.getElementById('barList');
list.innerHTML = '';
const filtered = bars.filter(b => {
const matchesLocation = filter === 'All' || b.address.includes(filter);
const matchesSearch = search === '' || b.name.toLowerCase().includes(search.toLowerCase());
return matchesLocation && matchesSearch;
});
filtered.filter(b => !b.featured).forEach(bar => {
const div = document.createElement('div');
div.className = 'bar-card-mini';
div.onclick = () => showBar(bars.indexOf(bar));
div.innerHTML = `<div class="bar-icon"><img src="glyphs/${bar.image}.svg" alt=""></div><div class="bar-info"><h4>${bar.name}</h4><p class="bar-address">${bar.address.split(',')[0]}</p><div class="bar-hours"><span>${bar.hours.split('|')[0].trim()}</span></div></div>`;
list.appendChild(div);
});
}

function renderDeals(filterDay = 'All', search = '') {
const list = document.getElementById('dealList');
list.innerHTML = '';
const filtered = deals.filter(d => (filterDay === 'All' || (d.days && d.days.includes(filterDay))) && (search === '' || d.bar.toLowerCase().includes(search.toLowerCase())));
filtered.slice(1).forEach(deal => {
const div = document.createElement('div');
div.className = 'deal-card-mini';
div.innerHTML = `<div class="deal-header"><span class="deal-bar">${deal.bar}</span><span class="deal-code">${deal.code}</span></div><h4>${deal.offer}</h4><p class="deal-desc">${deal.desc}</p><div class="deal-meta"><span>üìç ${deal.location}</span><span>‚è∞ ${deal.expires}</span></div>`;
list.appendChild(div);
});
}

function renderEvents(filter = 'All', search = '') {
const list = document.getElementById('eventList');
list.innerHTML = '';
const filtered = events.filter(e => (filter === 'All' || e.type === filter) && (search === '' || e.name.toLowerCase().includes(search.toLowerCase()) || e.bar.toLowerCase().includes(search.toLowerCase())));
if (filtered.length === 0) { list.innerHTML = '<div class="empty-state"><img src="glyphs/question.svg" alt=""><p>No events found</p></div>'; return; }
filtered.forEach(e => {
const div = document.createElement('div');
div.className = 'event-card';
div.onclick = () => showEvent(events.indexOf(e));
div.innerHTML = `<div class="event-date"><img src="glyphs/${e.image}.svg" alt=""><span>${e.day}</span></div><div class="event-info"><span class="event-type">${e.type}</span><span class="event-time">${e.time}</span><h4>${e.name}</h4><p>${e.bar}</p></div><button class="fav-btn" onclick="event.stopPropagation()"><img src="glyphs/heart.svg" alt=""></button>`;
list.appendChild(div);
});
}

function filterEventsByDay() {
const day = document.getElementById('dayFilter').value;
renderEvents(day === 'All' ? 'All' : 'All', document.getElementById('search').value);
const filtered = day === 'All' ? events : events.filter(e => e.day === day);
renderFilteredEvents(filtered);
}

function renderFilteredEvents(filtered) {
const list = document.getElementById('eventList');
list.innerHTML = '';
if (filtered.length === 0) { list.innerHTML = '<div class="empty-state"><img src="glyphs/question.svg" alt=""><p>No events found</p></div>'; return; }
filtered.forEach(e => {
const div = document.createElement('div');
div.className = 'event-card';
div.onclick = () => showEvent(events.indexOf(e));
div.innerHTML = `<div class="event-date"><img src="glyphs/${e.image}.svg" alt=""><span>${e.day}</span></div><div class="event-info"><span class="event-type">${e.type}</span><span class="event-time">${e.time}</span><h4>${e.name}</h4><p>${e.bar}</p></div><button class="fav-btn" onclick="event.stopPropagation()"><img src="glyphs/heart.svg" alt=""></button>`;
list.appendChild(div);
});
}

function filterBarsByLocation() { renderBars(document.getElementById('locationFilter').value, document.getElementById('search').value); }
function filterDealsByDay() { renderDeals(document.getElementById('dealDayFilter').value, document.getElementById('search').value); }

function handleSearch(query) {
const activeTab = document.querySelector('.nav-btn.active').dataset.tab;
if (activeTab === 'events') {
const day = document.getElementById('dayFilter').value;
if (day === 'All') renderEvents('All', query);
else { const filtered = events.filter(e => e.day === day); renderFilteredEvents(filter.filter(e => query === '' || e.name.toLowerCase().includes(query) || e.bar.toLowerCase().includes(query))); }
} else if (activeTab === 'bars') renderBars(document.getElementById('locationFilter').value, query);
else renderDeals(document.getElementById('dealDayFilter').value, query);
}

function switchTab(tab) {
document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
document.querySelector(`[data-tab="${tab}"]`).classList.add('active');
document.getElementById('eventsTab').style.display = tab === 'events' ? 'block' : 'none';
document.getElementById('barsTab').style.display = tab === 'bars' ? 'block' : 'none';
document.getElementById('dealsTab').style.display = tab === 'deals' ? 'block' : 'none';
}

function showEvent(idx) {
const e = events[idx];
const shareUrl = window.location.href.split('?')[0] + '?event=' + e.id;
document.getElementById('eventModalHeader').className = 'modal-header';
document.getElementById('eventModalHeader').innerHTML = `<img src="glyphs/${e.image}.svg" alt=""><span class="modal-type">${e.type}</span>`;
document.getElementById('eventModalBody').innerHTML = `<h3>${e.name}</h3><p class="modal-bar">${e.bar}</p><p class="modal-desc">${e.desc}</p><div class="modal-details"><div><img src="glyphs/calendar.svg" alt=""><div><p class="detail-label">${e.day}, ${e.date}</p><p class="detail-time">${e.time}</p></div></div><div><img src="glyphs/pin.svg" alt=""><p>${e.location}</p></div></div><div class="modal-actions"><button class="calendar-btn" onclick="downloadICS('${e.name}','${e.bar}','${e.day} ${e.date}','${e.time}','${e.location}')">Add to Calendar</button><button class="share-btn" onclick="shareEvent('${e.name}','${e.bar}','${e.day} ${e.time}','${shareUrl}')">Share</button></div><div class="share-link"><input type="text" value="${shareUrl}" readonly onclick="this.select()"><button onclick="copyShareLink('${shareUrl}')">Copy</button></div>`;
document.getElementById('eventModal').style.display = 'flex';
}

function showBar(idx) {
const b = bars[idx];
document.getElementById('barModalHeader').className = 'modal-header bar-modal-header';
document.getElementById('barModalHeader').innerHTML = `<img src="glyphs/${b.image}.svg" alt="">`;
document.getElementById('barModalBody').innerHTML = `<h3>${b.name}</h3><p class="modal-bar">${b.vibe}</p><p class="modal-desc">${b.desc}</p><div class="modal-details"><div><img src="glyphs/pin.svg" alt=""><p>${b.address}</p></div><div><img src="glyphs/clock.svg" alt=""><p>${b.hours}</p></div>${b.phone ? `<div><img src="glyphs/question.svg" alt=""><p><a href="tel:${b.phone}">${b.phone}</a></p></div>` : ''}</div><div class="modal-actions"><a href="${b.map}" target="_blank" rel="noopener" class="map-btn">Open in Maps</a>${b.menu ? `<a href="${b.menu}" target="_blank" rel="noopener" class="menu-btn">View Menu</a>` : ''}</div>`;
document.getElementById('barModal').style.display = 'flex';
}

function downloadICS(title, location, date, time, fullLocation) {
const icsContent = `BEGIN:VCALENDAR\nVERSION:2.0\nBEGIN:VEVENT\nSUMMARY:${title} at ${location}\nDTSTART:${date.replace(/ /g,'').toUpperCase()}T${time.replace(/:/g,'').replace('pm','').replace('am','')}00\nLOCATION:${fullLocation}\nDESCRIPTION:${title} at ${location}\nEND:VEVENT\nEND:VCALENDAR`;
const blob = new Blob([icsContent], { type: 'text/calendar' });
const a = document.createElement('a');
a.href = URL.createObjectURL(blob);
a.download = 'bula-board-event.ics';
a.click();
}

function shareEvent(name, bar, dayTime, shareUrl) {
const text = `${name} at ${bar} - ${dayTime}`;
if (navigator.share) navigator.share({ title: 'Bula Board Event', text: text, url: shareUrl });
else { navigator.clipboard.writeText(text + '\n' + shareUrl); alert('Copied to clipboard!'); }
}

function copyShareLink(url) { navigator.clipboard.writeText(url); alert('Link copied!'); }

function handleNewsletter(e) { e.preventDefault(); alert('Thanks for subscribing!'); e.target.reset(); }

function showAbout() { document.getElementById('aboutModal').style.display = 'flex'; }
function closeAboutModal() { document.getElementById('aboutModal').style.display = 'none'; }
function showForBars() { document.getElementById('forBarsModal').style.display = 'flex'; }
function closeForBarsModal() { document.getElementById('forBarsModal').style.display = 'none'; }
function closeEventModal() { document.getElementById('eventModal').style.display = 'none'; }
function closeBarModal() { document.getElementById('barModal').style.display = 'none'; }

initApp();
</script>
</body>
</html>
